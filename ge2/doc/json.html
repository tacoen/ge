<!DOCTYPE html>
<html lang="en">
<head>
<meta charSet="utf-8"/>
<script src='../js/entypo.js'></script>
<script src='../js/tafunc.js'></script>
<script src='func.js'></script>
<link rel="stylesheet" href="../css/ge-new.css" type="text/css" media="all">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>JSON Demo</title>
</head>
<body>
<nav topnav class='flex'>
<button class='naked' data-toggle='#sitemenu'>
<i data-icon='menu'></i>
</button>
<div class='flex middle right'>
<button onclick='ta.theme_switch(this)' data-theme='light' class='themeswitcher naked'>
<i class='dark' data-icon='adjust-2'></i>
<i class='light' data-icon='adjust'></i>
</button>
<a href='/ge2/' class='favicon'>
<img src='/favicon.ico'>
</a>
</div>
</nav>
<!--topnav-->
<div id="sitemenu" class="hide">
<button class="naked closer" data-toggle="#sitemenu">
<i data-icon="cross"></i>
</button>
<header>
<h1 class="red fg">Ge(éª¼) 2.0</h1>
</header>
<div class="flex w100 container sitemenu" data-fetch="../_sitemenu.html"></div>
</div>
<!--sitemenu-->
<aside class="pa w20 cssupage" id="toc" style="
    height: auto;
    padding-bottom: 2rem;
"><div class="toc"></div></aside>
<div class="w100 pa main content tocindex">
<h1>JSON Demo</h1>

<table>
<tr>
<td colspan='2'><h2>Load</h2></td>
</tr><tr>
<td>
<pre><code>ta.load_json('data/test.json')
  .then(data => {
    var ul = document.createElement('ul'); 
    data.name.forEach( (d)=> { 
		var li = document.createElement('li'); 
		li.innerText=d; 
		ul.appendChild(li); 
	});
    document.querySelector('.test1').appendChild(ul); 
  })
  .catch(error => {
    console.error(error);
  })
</code></pre>
</td><td class='test1'>

</td></tr>
<tr>
<td colspan='2'><h2>Write (php)</h2></td>
</tr><tr>
<td>
<p>We show it using contenteditable, where I found very usable. Ensure your path/file is writeable.</p>
<div id='jsondemo' data-post='../json.php' class='flex column'>
<div contenteditable>a something to show as text</div>
<div contenteditable name='bernama'>another thing as text</div>
</div>
<p><button onclick='ta.contentedit_json("#jsondemo"); ta.fetch(".test2");'>save</button></p>

<xmp><div id='jsondemo' data-post='../json.php' class='flex column'>
<div contenteditable>a something to show as text</div>
<div contenteditable name='bernama'>another thing as text</div>
</div>
<p><button onclick='ta.contentedit_json("#jsondemo"); 
	   ta.fetch(".test2");'>save</button></p>
</xmp>
	
</td><td>
json.php:
<xmp>header('Content-type: application/json');
$input = file_get_contents('php://input');
file_put_contents('/var/www/ge2/doc/data/content.txt',$input);
echo json_encode( $input, true );</xmp>
<dov class='test2' data-fetch='data/content.txt'></div>

</td></tr>
</table>
</div>
<script>
document.addEventListener("DOMContentLoaded", function() {

ta.mediaWidth();



ta.load_json('data/test.json')
  .then(data => {
    var ul = document.createElement('ul'); 
    data.name.forEach( (d)=> { var li = document.createElement('li'); li.innerText=d; ul.appendChild(li); });
    document.querySelector('.test1').appendChild(ul); 
  })
  .catch(error => {
    console.error(error);
  })
	
ta.fetch('.test2');  

});
</script>
</body>
</html>
</script></html>
